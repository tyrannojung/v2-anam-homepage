<config autoescape="on" />

<include target="config_header.html" />

<div cond="!empty($XE_VALIDATOR_MESSAGE) && $XE_VALIDATOR_ID == 'modules/admin/tpl/config_advanced/1'" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
	<p>{$XE_VALIDATOR_MESSAGE}</p>
</div>
<section class="section">
	<form action="./" method="post" class="x_form-horizontal">
		<input type="hidden" name="module" value="admin" />
		<input type="hidden" name="act" value="procAdminUpdateAdvanced" />
		<input type="hidden" name="xe_validator_id" value="modules/admin/tpl/config_advanced/1" />
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_rewrite}</label>
			<div class="x_controls">
				<label for="use_rewrite_0" class="x_inline"><input type="radio" name="use_rewrite" id="use_rewrite_0" value="0" checked="checked"|cond="$use_rewrite == 0" /> {$lang->use_rewrite_0}</label>
				<label for="use_rewrite_1" class="x_inline"><input type="radio" name="use_rewrite" id="use_rewrite_1" value="1" checked="checked"|cond="$use_rewrite == 1" /> {$lang->use_rewrite_1}</label>
				<label for="use_rewrite_2" class="x_inline"><input type="radio" name="use_rewrite" id="use_rewrite_2" value="2" checked="checked"|cond="$use_rewrite == 2" /> {$lang->use_rewrite_2}</label>
				<p class="x_help-block">{$lang->about_use_rewrite}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_mobile_view}</label>
			<div class="x_controls">
				<label for="use_mobile_view_y" class="x_inline">
					<input type="radio" name="use_mobile_view" id="use_mobile_view_y" value="Y" checked="checked"|cond="$use_mobile_view" />
					{$lang->cmd_yes}
				</label>
				<label for="use_mobile_view_n" class="x_inline">
					<input type="radio" name="use_mobile_view" id="use_mobile_view_n" value="N" checked="checked"|cond="!$use_mobile_view" />
					{$lang->cmd_no}
				</label>
				<p class="x_help-block">{$lang->about_mobile_view}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->tablets_as_mobile}</label>
			<div class="x_controls">
				<label for="tablets_as_mobile_y" class="x_inline">
					<input type="radio" name="tablets_as_mobile" id="tablets_as_mobile_y" value="Y" checked="checked"|cond="$tablets_as_mobile" />
					{$lang->cmd_yes}
				</label>
				<label for="tablets_as_mobile_n" class="x_inline">
					<input type="radio" name="tablets_as_mobile" id="tablets_as_mobile_n" value="N" checked="checked"|cond="!$tablets_as_mobile" />
					{$lang->cmd_no}
				</label>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->auto_select_lang}</label>
			<div class="x_controls">
				<label for="auto_select_lang_y" class="x_inline">
					<input type="radio" name="auto_select_lang" id="auto_select_lang_y" value="Y" checked="checked"|cond="$auto_select_lang" />
					{$lang->cmd_yes}
				</label>
				<label for="auto_select_lang_n" class="x_inline">
					<input type="radio" name="auto_select_lang" id="auto_select_lang_n" value="N" checked="checked"|cond="!$auto_select_lang" />
					{$lang->cmd_no}
				</label>
				<br />
				<p class="x_help-block">{$lang->about_auto_select_lang}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->lang_select}</label>
			<div class="x_controls">
				<label for="lang_{$key}" class="x_inline" loop="$supported_lang=>$key,$val">
					<input type="checkbox" name="enabled_lang[]" id="lang_{$key}" value="{$key}" checked="checked"|cond="in_array($key, $enabled_lang)" />
					{$val['name']}
				</label>
			</div>
		</div>
		<div class="x_control-group">
			<label for="default_lang" class="x_control-label">{$lang->default_lang}</label>
			<div class="x_controls">
				<select name="default_lang" id="default_lang">
					<option value="{$key}" loop="$enabled_lang=>$key" selected="selected"|cond="$key==$default_lang">{$supported_lang[$key]['name']}</option>
				</select>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="default_timezone">{$lang->timezone}</label>
			<div class="x_controls">
				<select name="default_timezone">
					<option loop="$timezones => $key,$val" value="{$key}" selected="selected"|cond="$key==$selected_timezone">{$val}</option>
				</select>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="mobile_viewport">{$lang->mobile_viewport}</label>
			<div class="x_controls">
				<input type="text" name="mobile_viewport" id="mobile_viewport" value="{$mobile_viewport}" class="x_full-width" />
				<p class="x_help-block">{$lang->about_mobile_viewport} <a href="javascript:restoreDefaultViewport()">{$lang->restore_default_viewport}</a></p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_db_session}</label>
			<div class="x_controls">
				<label for="use_db_session_y" class="x_inline"><input type="radio" name="use_db_session" id="use_db_session_y" value="Y" checked="checked"|cond="$use_db_session" /> {$lang->cmd_yes}</label>
				<label for="use_db_session_n" class="x_inline"><input type="radio" name="use_db_session" id="use_db_session_n" value="N" checked="checked"|cond="!$use_db_session" /> {$lang->cmd_no}</label>
				<br />
				<p class="x_help-block">{$lang->about_db_session}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->delay_session}</label>
			<div class="x_controls">
				<label for="delay_session_y" class="x_inline"><input type="radio" name="delay_session" id="delay_session_y" value="Y" checked="checked"|cond="$delay_session" /> {$lang->cmd_yes}</label>
				<label for="delay_session_n" class="x_inline"><input type="radio" name="delay_session" id="delay_session_n" value="N" checked="checked"|cond="!$delay_session" /> {$lang->cmd_no}</label>
				<br />
				<p class="x_help-block">{$lang->about_delay_session}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="delay_template_compile">{$lang->delay_template_compile}</label>
			<div class="x_controls">
				<select name="delay_template_compile" id="delay_template_compile">
					<option value="0" selected="selected"|cond="$delay_template_compile == 0">0 {$lang->unit_sec}</option>
					<option value="1" selected="selected"|cond="$delay_template_compile == 1">1 {$lang->unit_sec}</option>
					<option value="2" selected="selected"|cond="$delay_template_compile == 2">2 {$lang->unit_sec}</option>
					<option value="3" selected="selected"|cond="$delay_template_compile == 3">3 {$lang->unit_sec}</option>
				</select>
				<p class="x_help-block">{$lang->about_delay_template_compile}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->thumbnail_target}</label>
			<div class="x_controls">
				<label for="thumbnail_target_all" class="x_inline">
					<input type="radio" name="thumbnail_target" id="thumbnail_target_all" value="all" checked="checked"|cond="$thumbnail_target == 'all' || !$thumbnail_target" />
					{$lang->thumbnail_target_all}
				</label>
				<label for="thumbnail_target_attachment" class="x_inline">
					<input type="radio" name="thumbnail_target" id="thumbnail_target_attachment" value="attachment" checked="checked"|cond="$thumbnail_target == 'attachment'" />
					{$lang->thumbnail_target_attachment}
				</label>
				<label for="thumbnail_target_none" class="x_inline">
					<input type="radio" name="thumbnail_target" id="thumbnail_target_none" value="none" checked="checked"|cond="$thumbnail_target == 'none'" />
					{$lang->thumbnail_none}
				</label>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="thumbnail_type">{$lang->thumbnail_type}</label>
			<div class="x_controls">
				<select name="thumbnail_type" id="thumbnail_type">
					<option value="fill" selected="selected"|cond="$thumbnail_type == 'fill'">{$lang->thumbnail_fill}</option>
					<option value="ratio" selected="selected"|cond="$thumbnail_type == 'ratio'">{$lang->thumbnail_ratio}</option>
					<option value="crop" selected="selected"|cond="$thumbnail_type == 'crop'">{$lang->thumbnail_crop}</option>
					<option value="stretch" selected="selected"|cond="$thumbnail_type == 'stretch'">{$lang->thumbnail_stretch}</option>
					<option value="center" selected="selected"|cond="$thumbnail_type == 'center'">{$lang->thumbnail_center}</option>
				</select>
				<label class="x_inline" for="thumbnail_quality" style="margin-left:16px">{$lang->image_quality}:
					<select name="thumbnail_quality" id="thumbnail_quality" style="min-width:120px">
						<!--@for($q = 50; $q <= 100; $q += 5)-->
							<option value="{$q}" selected="selected"|cond="$thumbnail_quality === $q">{$q}%<!--@if($q === 75)--> ({$lang->standard})<!--@end--></option>
						<!--@endfor-->
					</select>
				</label>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_object_cache}</label>
			<div class="x_controls">
				<select name="object_cache_type" id="object_cache_type">
					<option value="dummy">{$lang->msg_dummy_or_do_not_use}</option>
					<option value="{$key}" loop="$object_cache_types=>$key" cond="$key !== 'dummy'" selected="selected"|cond="$key == $object_cache_type">{$key}</option>
				</select>
				<div id="object_cache_additional_config" class="x_inline" style="display:none;margin-left:16px">
					<label for="object_cache_host" class="x_inline">{$lang->cache_host}: <input type="text" name="object_cache_host" id="object_cache_host" value="{$object_cache_host}" /></label>
					<label for="object_cache_port" class="x_inline">{$lang->cache_port}: <input type="number" name="object_cache_port" id="object_cache_port" size="5" style="min-width:70px" value="{$object_cache_port}" /></label>
				</div>
				<div id="object_cache_redis_config" style="display:none">
					<label for="object_cache_user" class="x_inline">{$lang->cache_user}: <input type="text" name="object_cache_user" id="object_cache_user" value="{$object_cache_user}" /></label>
					<label for="object_cache_pass" class="x_inline">{$lang->cache_pass}: <input type="password" name="object_cache_pass" id="object_cache_pass" value="{$object_cache_pass}" autocomplete="new-password" /></label>
					<label for="object_cache_dbnum" class="x_inline">{$lang->cache_dbnum}: <input type="number" name="object_cache_dbnum" id="object_cache_dbnum" size="3" style="min-width:70px" value="{$object_cache_dbnum}" /></label>
				</div>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="cache_default_ttl">{$lang->cache_default_ttl}</label>
			<div class="x_controls">
				<input type="number" min="1" name="cache_default_ttl" id="cache_default_ttl" value="{$cache_default_ttl}" /> {$lang->unit_sec}
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->cache_truncate_method}</label>
			<div class="x_controls">
				<label for="cache_truncate_method_delete" class="x_inline"><input type="radio" name="cache_truncate_method" id="cache_truncate_method_delete" value="delete" checked="checked"|cond="$cache_truncate_method !== 'empty'" /> {$lang->cache_truncate_method_delete}</label>
				<label for="cache_truncate_method_empty" class="x_inline"><input type="radio" name="cache_truncate_method" id="cache_truncate_method_empty" value="empty" checked="checked"|cond="$cache_truncate_method === 'empty'" /> {$lang->cache_truncate_method_empty}</label>
				<br />
				<p class="x_help-block">{$lang->about_cache_truncate_method}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->cache_control_header}</label>
			<div class="x_controls">
				<label for="cache_control_header_no_cache" class="x_inline"><input type="checkbox" name="cache_control_header[]" id="cache_control_header_no_cache" value="no-cache" checked="checked"|cond="in_array('no-cache', $cache_control_header)" disabled="disabled" /> no-cache</label>
				<label for="cache_control_header_no_store" class="x_inline"><input type="checkbox" name="cache_control_header[]" id="cache_control_header_no_store" value="no-store" checked="checked"|cond="in_array('no-store', $cache_control_header)" /> no-store</label>
				<label for="cache_control_header_must_revalidate" class="x_inline"><input type="checkbox" name="cache_control_header[]" id="cache_control_header_must_revalidate" value="must-revalidate" checked="checked"|cond="in_array('must-revalidate', $cache_control_header)" /> must-revalidate</label>
				<br />
				<p class="x_help-block">{$lang->about_cache_control_header}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="outgoing_proxy">{$lang->outgoing_proxy}</label>
			<div class="x_controls">
				<input type="text" name="outgoing_proxy" id="outgoing_proxy" value="{$outgoing_proxy}" />
				<p class="x_help-block">{$lang->about_outgoing_proxy}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="partial_page_rendering">{$lang->cmd_partial_page_rendering}</label>
			<div class="x_controls">
				<select name="partial_page_rendering" id="partial_page_rendering">
					<option value="all" selected="selected"|cond="$partial_page_rendering === 'all'">{$lang->cmd_partial_page_rendering_all}</option>
					<option value="except_robots" selected="selected"|cond="$partial_page_rendering === 'except_robots'">{$lang->cmd_partial_page_rendering_except_robots}</option>
					<option value="internal_only" selected="selected"|cond="$partial_page_rendering === 'internal_only'">{$lang->cmd_partial_page_rendering_internal_only}</option>
					<option value="ajax_only" selected="selected"|cond="$partial_page_rendering === 'ajax_only'">{$lang->cmd_partial_page_rendering_ajax_only}</option>
					<option value="disabled" selected="selected"|cond="$partial_page_rendering === 'disabled'">{$lang->cmd_partial_page_rendering_disabled}</option>
				</select>
				<p class="x_help-block">{$lang->about_partial_page_rendering}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->manager_layout}</label>
			<div class="x_controls">
				<label for="manager_layout_module" class="x_inline"><input type="radio" name="manager_layout" id="manager_layout_module" value="module" checked="checked"|cond="$manager_layout != 'admin'" /> {$lang->cmd_manager_layout_module}</label>
				<label for="manager_layout_admin" class="x_inline"><input type="radio" name="manager_layout" id="manager_layout_admin" value="admin" checked="checked"|cond="$manager_layout == 'admin'" /> {$lang->cmd_manager_layout_admin}</label>
				<br />
				<p class="x_help-block">{$lang->about_manager_layout}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->minify_scripts}</label>
			<div class="x_controls">
				<label for="minify_scripts_none" class="x_inline"><input type="radio" name="minify_scripts" id="minify_scripts_none" value="none" checked="checked"|cond="$minify_scripts=='none'" /> {$lang->cmd_minify_none}</label>
				<label for="minify_scripts_common" class="x_inline"><input type="radio" name="minify_scripts" id="minify_scripts_common" value="common" checked="checked"|cond="$minify_scripts!='all' && $minify_scripts!='none'" /> {$lang->cmd_minify_common}</label>
				<label for="minify_scripts_all" class="x_inline"><input type="radio" name="minify_scripts" id="minify_scripts_all" value="all" checked="checked"|cond="$minify_scripts=='all'" /> {$lang->cmd_minify_all}</label>
				<br />
				<p class="x_help-block">{$lang->about_minify_scripts}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->concat_scripts}</label>
			<div class="x_controls">
				<label for="concat_scripts_none" class="x_inline"><input type="radio" name="concat_scripts" id="concat_scripts_none" value="none" checked="checked"|cond="!contains('css', $concat_scripts) && !contains('js', $concat_scripts)" /> {$lang->cmd_concat_none}</label>
				<label for="concat_scripts_css_only" class="x_inline"><input type="radio" name="concat_scripts" id="concat_scripts_css_only" value="css" checked="checked"|cond="$concat_scripts=='css'" /> {$lang->cmd_concat_css_only}</label>
				<label for="concat_scripts_js_only" class="x_inline"><input type="radio" name="concat_scripts" id="concat_scripts_js_only" value="js" checked="checked"|cond="$concat_scripts=='js'" /> {$lang->cmd_concat_js_only}</label>
				<label for="concat_scripts_css_js" class="x_inline"><input type="radio" name="concat_scripts" id="concat_scripts_css_js" value="css,js" checked="checked"|cond="$concat_scripts=='css,js'" /> {$lang->cmd_concat_css_js}</label>
				<br />
				<p class="x_help-block">{$lang->about_concat_scripts}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->jquery_version}</label>
			<div class="x_controls">
				<label for="jquery_version_2" class="x_inline"><input type="radio" name="jquery_version" id="jquery_version_2" value="2" checked="checked"|cond="$jquery_version !== 3" /> jQuery {HTMLDisplayHandler::JQUERY_V2}</label>
				<label for="jquery_version_3" class="x_inline"><input type="radio" name="jquery_version" id="jquery_version_3" value="3" checked="checked"|cond="$jquery_version === 3" /> jQuery {HTMLDisplayHandler::JQUERY_V3}</label>
				<br />
				<p class="x_help-block">{$lang->about_jquery_version}</p>
			</div>
		</div>
		<div class="x_clearfix btnArea">
			<div class="x_pull-right">
				<button type="submit" class="x_btn x_btn-primary">{$lang->cmd_save}</button>
			</div>
		</div>
	</form>
</section>

<script>
	function restoreDefaultViewport() {
		$('#mobile_viewport').val({\HTMLDisplayHandler::DEFAULT_VIEWPORT|json|noescape});
	}
</script>
